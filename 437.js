"use strict";(self.webpackChunkrslang=self.webpackChunkrslang||[]).push([[437],{7437:function(e,o,r){var t=this&&this.__awaiter||function(e,o,r,t){return new(r||(r=Promise))((function(d,s){function i(e){try{a(t.next(e))}catch(e){s(e)}}function n(e){try{a(t.throw(e))}catch(e){s(e)}}function a(e){var o;e.done?d(e.value):(o=e.value,o instanceof r?o:new r((function(e){e(o)}))).then(i,n)}a((t=t.apply(e,o||[])).next())}))},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0}),o.deleteWordProgress=o.plusWordProgress=o.getUserWordByID=o.getUserWords=o.updateUserWord=o.createUserWord=void 0;const s=new(d(r(871)).default);s.loadUser(),o.createUserWord=({userId:e,wordId:o,word:r})=>t(void 0,void 0,void 0,(function*(){yield fetch(`https://sveta077-rslang.herokuapp.com/users/${e}/words/${o}`,{method:"POST",headers:{Authorization:`Bearer ${s.token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})})),o.updateUserWord=({userId:e,wordId:o,word:r})=>t(void 0,void 0,void 0,(function*(){yield fetch(`https://sveta077-rslang.herokuapp.com/users/${e}/words/${o}`,{method:"PUT",headers:{Authorization:`Bearer ${s.token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})})),o.getUserWords=e=>t(void 0,void 0,void 0,(function*(){const o=yield fetch(`https://sveta077-rslang.herokuapp.com/users/${e}/words`,{method:"GET",headers:{Authorization:`Bearer ${s.token}`,Accept:"application/json"}});return yield o.json()})),o.getUserWordByID=(e,o)=>t(void 0,void 0,void 0,(function*(){const r=yield fetch(`https://sveta077-rslang.herokuapp.com/users/${e}/words/${o}`,{method:"GET",headers:{Authorization:`Bearer ${s.token}`,Accept:"application/json"}});return yield r.json()})),o.plusWordProgress=e=>{(0,o.getUserWords)(s.id).then((r=>{if(r.map((e=>e.wordId)).filter((e=>void 0!==e)).includes(e.id)){const t=r.find((o=>o.wordId===e.id));t.optional.progress+100/t.optional.target<100?(0,o.updateUserWord)({userId:s.id,wordId:e.id,word:{difficulty:t.difficulty,optional:{target:t.optional.target,progress:t.optional.progress+100/t.optional.target}}}):(0,o.updateUserWord)({userId:s.id,wordId:e.id,word:{difficulty:"learned",optional:{target:t.optional.target,progress:100}}})}else(0,o.createUserWord)({userId:s.id,wordId:e.id,word:{difficulty:"easy",optional:{target:3,progress:0+100/3}}})}))},o.deleteWordProgress=e=>{(0,o.getUserWords)(s.id).then((r=>{r.map((e=>e.wordId)).filter((e=>void 0!==e)).includes(e.id)?(0,o.updateUserWord)({userId:s.id,wordId:e.id,word:{difficulty:"easy",optional:{target:3,progress:0}}}):(0,o.createUserWord)({userId:s.id,wordId:e.id,word:{difficulty:"easy",optional:{target:3,progress:0}}})}))}}}]);